<h2 class="content-subhead">Payments Made</h2>
<input type="hidden" id="eventId" value="{{event_id}}">
<!-- Button to trigger modal -->
<div ng-controller="ModalDemoCtrl">
  <p>
    <button role="button" class="pure-button-primary pure-button" ng-click="open(eventId)">
      New Payment
    </button>
  </p>
</div>
<h3>Total payments for the event: £{{ payments_total }}</h3>

<table class="pure-table">
  <thead>
    <tr>
      <th>Amount</th>
      <th>Reason</th>
      <th>Who paid</th>
    </tr>
  </thead>
  <tbody>
    <tr ng-repeat="payment in payments">
      <td>£{{ payment.amount }}</td>
      <td>{{ payment.reason }}</td>
      <td>{{payment.users[0].name}}</td>
    </tr>
  </tbody>
</table>

<!-- Modal -->
<!--
 * Bootstrap v2.3.2
 *
 * Copyright 2012 Twitter, Inc
 * Licensed under the Apache License v2.0
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Designed and built with all the love in the world @twitter by @mdo and @fat.
-->
<div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <%= form_for(@payment) do |f| %>
  <% if @payment.errors.any? %>
  <div id="error_explanation">
    <h2><%= pluralize(@payment.errors.count, "error") %> prohibited this payment from being saved:</h2>

    <ul>
      <% @payment.errors.full_messages.each do |msg| %>
      <li><%= msg %></li>
      <% end %>
    </ul>
  </div>
  <% end %>
  <div class="field">
    <%= f.label :event_id %><br />
    <%= f.collection_select :event_id, Event.all, :id, :name %>
  </div>
  <div class="field">
    <%= f.label :currency_id %><br />
    <%= f.collection_select :currency_id, Currency.all, :id, :iso_code %>
  </div>
  <div class="field">
    <%= f.label :amount %><br />
    <%= f.text_field :amount %>
  </div>
  <div class="field">
    <%= f.label :reason %><br />
    <%= f.text_field :reason %>
  </div>

  <div class="field">
    <%= f.label :created %><br />
    <%= f.datetime_select :created %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
  <% end %>

</div>

